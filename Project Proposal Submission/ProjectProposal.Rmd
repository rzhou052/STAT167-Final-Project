---
title: "Project Proposal"
authors: "Richard Zhou, Adam Rui, Jonathan Darius, Ojasvi Godha, Ryan Huang, Isaac Kang"
output: html_document
---

## Installation and Packages

```{r}
# install.packages("tidyverse")
# install.packages("nycflights13")
# install.packages("nycflights23")

library("tidyverse")
library("nycflights13")
library("nycflights23")
library("dplyr")
```

## Objectives:

Our overall objective of this project is to analyze and compare flight data from 2013 and 2023 using the nycflights13 and nycflights23 packages. We aim to identify patterns, trends, and key factors affecting flight performance, delays, and operations over time. Our research aims to answer the following questions:

1.   Have flight delays improved or gotten worse between 2013 and 2023?

2.  To expand on Question #1, have individual airlines gotten better or worse with delays over time?

3.  How does weather impact flight performance, and has it changed over time?

4.  Which airports have seen the largest increase or decrease in traffic?

5.  Have there been any big changes in popular destinations from NYC between 2013 and 2023?

6.  Is there a seasonal pattern to flight delays? (Such as holidays)

7.  What are the most reliable airlines, and has this changed over time?

## Datasets:

[Include your exploratory data analysis and some visualization! Make sure the data is reasonably clean and contains enough information to answer your questions. Which variables in the table are most relevant to your questions? Do you plan to acquire additional datasets?]\
\
We plan on using the packages nycflights13 and nycflights23, using the datasets provided in both. Specifically, we will be focusing on flights, airlines, airports, and weather from both packages.

```{r}
# listing dimensions of datasets
dimensions <- tibble(name = character(), rows = integer(), cols = integer())

dimensions <- add_row(dimensions, name = "flights_2013", rows = nrow(nycflights13::flights), cols = ncol(nycflights13::flights))
dimensions <- add_row(dimensions, name = "flights_2023", rows = nrow(nycflights23::flights), cols = ncol(nycflights23::flights))

dimensions <- add_row(dimensions, name = "airlines_2013", rows = nrow(nycflights13::airlines), cols = ncol(nycflights13::airlines))
dimensions <- add_row(dimensions, name = "airlines_2023", rows = nrow(nycflights23::airlines), cols = ncol(nycflights23::airlines))

dimensions <- add_row(dimensions, name = "airports_2013", rows = nrow(nycflights13::airports), cols = ncol(nycflights13::airports))
dimensions <- add_row(dimensions, name = "airports_2023", rows = nrow(nycflights23::airports), cols = ncol(nycflights23::airports))

dimensions <- add_row(dimensions, name = "weather_2013", rows = nrow(nycflights13::weather), cols = ncol(nycflights13::weather))
dimensions <- add_row(dimensions, name = "weather_2023", rows = nrow(nycflights23::weather), cols = ncol(nycflights23::weather))

print(dimensions)
```
```{r}
flights_combined <- bind_rows(nycflights13::flights %>% mutate(year = 2013), nycflights23::flights %>% mutate(year = 2023))

flights_clean <- flights_combined %>%
  filter(!is.na(dep_delay), !is.na(arr_delay)) %>%
  left_join(nycflights13::airlines, by = "carrier") %>%
  left_join(nycflights13::airports, by = c("dest" = "faa"))
```


Exploring flight delay over time based on carrier:


```{r}
delay_by_carrier <- flights_clean %>%
  group_by(name.x, year) %>%
  summarise(avg_dep_delay = mean(dep_delay), .groups = 'drop')

ggplot(delay_by_carrier, aes(x = name.x, y = avg_dep_delay, fill = factor(year))) +
  geom_col(position = position_dodge2(width = 0.8, preserve = "single")) +
  coord_flip() +
  labs(title = "Average Departure Delay by Carrier (2013 vs. 2023)", x = "Airline", y = "Avg Delay (mins)", fill = "Year")
```

Exploring how weather has impacted flight times:

```{r}
flights_weather <- bind_rows((nycflights13::flights %>% left_join(nycflights13::weather, by = c("origin", "time_hour"))), (nycflights23::flights %>% left_join(nycflights23::weather, by = c("origin", "time_hour"))))

flights_weather %>%
  ggplot(aes(x = precip, y = dep_delay)) +
  geom_point(alpha = 0.2) +
  geom_smooth(method = "lm", color = "red") +
  labs(title = "Departure Delays vs Precipitation", x = "Precipitation (inches)", y = "Delay (mins)")
```

## Our Plan:

[What do you plan to do with the data to answer your questions? For example, what assumptions will you make? What plots will you generate? What models will you explore? What evaluation approaches will you use? Some preliminary data analysis and modeling results will be a plus, but not a must.]

## Alternative Strategies/Backup Plans:

In the case our initial objectives don't work out as planned, here are a couple of alternative questions we came up with: 

1. Are there certain aircrafts or tail numbers that seem to be more prone to delays? 
    - We can analyze the delay times reported for each flight and see if there is a noticable pattern between the delay times and the types of aircrafts or tail numbers. 

2. Does the data support the idea that an aircraft with more flights per day tend to experience more delays due to the tight scheduling? 
    - We would look at aircrafts that are listed for multiple flights in a single day and see if the reported delay times are significant enough to prove that there is a reasonable relation between number of flights per day and flight delays. 
